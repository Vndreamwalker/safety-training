<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Đào tạo nhận diện mối nguy</title>

<style>
body { font-family: Arial; background:#f5f5f5; padding:20px }
h1 { text-align:center }

.video-wrapper {
  position:relative;
  width:800px; max-width:100%;
  margin:auto;
  background:#000;
}

video {
  width:100%;
}

.hazard {
  position:absolute;
  border:2px dashed red;
  background:rgba(255,0,0,.25);
  cursor:pointer;
  display:none;
}

.hazard.clicked {
  border-color:green;
  background:rgba(0,200,0,.35);
}

.result {
  text-align:center;
  font-size:20px;
  font-weight:bold;
  margin-top:15px;
}
</style>
</head>

<body>

<h1>Nhận diện mối nguy (0:20 → 0:30)</h1>

<div class="video-wrapper">

<video id="video" autoplay muted>
  <source src="https://drive.google.com/uc?export=download&id=1s3D8CcwvYhG_KOEMjo1G6pnbNYSOOGH6" type="video/mp4">
</video>

<!-- CLICK ZONE -->
<div class="hazard" style="top:120px; left:100px; width:150px; height:120px;"></div>
<div class="hazard" style="top:240px; left:360px; width:160px; height:130px;"></div>

</div>

<div class="result" id="result"></div>

<script>
const video = document.getElementById('video');
const hazards = document.querySelectorAll('.hazard');
const STOP_TIME = 20;
const total = hazards.length;
let found = 0;
let evaluated = false;

// Dừng video tại 20s để đánh giá
video.addEventListener('timeupdate', () => {
  if (video.currentTime >= STOP_TIME && !evaluated) {
    video.pause();
    hazards.forEach(h => h.style.display = 'block');
  }
});

// Click mối nguy
hazards.forEach(h => {
  h.onclick = () => {
    if (!h.classList.contains('clicked')) {
      h.classList.add('clicked');
      found++;
      if (found === total) {
        evaluated = true;
        document.getElementById('result').innerHTML =
          "✅ ĐÁNH GIÁ ĐÚNG – TRÁNH ĐƯỢC TAI NẠN";
        video.pause();
      }
    }
  };
});

// Nếu sau 10s không đủ → tai nạn
setTimeout(() => {
  if (!evaluated) {
    document.getElementById('result').innerHTML =
      "❌ ĐÁNH GIÁ CHƯA ĐỦ – TAI NẠN XẢY RA";
    video.play();
  }
}, 30000);
</script>

</body>
</html>
